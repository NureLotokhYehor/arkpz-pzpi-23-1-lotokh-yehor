Міністерство освіти і науки України Харківський національний університет радіоелектроніки

Кафедра програмної інженерії

Звіт
З лабораторної роботи №3
З дисципліни «Аналіз та рефакторинг коду»
на тему: «РОЗРОБКА БІЗНЕС-ЛОГІКИ ТА ФУНКЦІЙ АДМІНІСТРУВАННЯ СЕРВЕРНОЇ ЧАСТИНИ ПРОГРАМНОЇ СИСТЕМИ »




Виконав
ст. гр. ПЗПІ-23-1
Лотох Єгор	Перевірив
ас. викладач каф. ПІ Дашенков Дмитро Сергійович
















Харків 2025
 
1 Вступ

1.1 Тема
Розробка бізнес-логіки та функцій адміністрування серверної частини програмної системи VetMonitor, яка забезпечує контроль стану тварин у клініках, автоматичну обробку даних про здоров’я тварин, формування рекомендацій та сповіщень, а також управління користувачами та адміністраторами системи.
1.2 Мета
Метою лабораторної роботи є створення бізнес-логіки серверної частини та функцій адміністрування, реалізація їх у вигляді програмного коду, перевірка коректності роботи та підготовка демонстрації для оцінки функціональності системи.

2 Хід роботи

2.1 Розробка бізнес-логіки
Серверна частина VetMonitor приймає дані про стан здоров’я тварин, що надходять від IoT-пристроїв у клініках. Для кожної тварини система зберігає температуру тіла, пульс, рівень активності та інші показники. На основі цих даних система формує рекомендації для власників тварин та ветеринарів, а також генерує сповіщення про критичні зміни. Бізнес-логіка включає алгоритми обробки даних, порівняння з пороговими значеннями та автоматичну генерацію рекомендацій і сповіщень.
2.2 Розробка функцій адміністрування
Адміністратори системи мають можливість створювати, редагувати та видаляти користувачів і тварин, керувати алгоритмами обробки даних та отримувати аналітичні звіти. Адміністрування включає авторизацію адміністратора, управління сесіями, перегляд та модифікацію даних користувачів і тварин.
2.3 Реалізація серверної частини
Для реалізації серверної частини використовуються Node.js, Express та MongoDB з Mongoose. Розроблено маршрути для бізнес-логіки та адміністрування, контролери для обробки даних, генерації сповіщень та рекомендацій, а також інтеграцію з базою даних для зберігання інформації про користувачів, тварин та адміністраторів.
2.4 Тестування
Тестування серверної частини проводилося за допомогою Postman та ручних сценаріїв. Перевірено прийом даних від клієнтів, формування сповіщень при критичних показниках, генерацію рекомендацій та функції адміністрування. Всі операції успішно пройшли тестування.
2.5 Документування та демонстрація
Розроблено UML-діаграми діяльності та взаємодії серверної частини. Створено відеодемонстрацію роботи бізнес-логіки та функцій адміністрування. Підготовлено хронологічний опис процесу тестування для відео.

3 Програмна реалізація

3.1 Бізнес-логіка серверної частини
Серверна частина системи VetMonitor реалізує бізнес-логіку, яка забезпечує автоматичну обробку даних про стан здоров’я тварин, що надходять від IoT-пристроїв у клініках. Для кожної тварини система зберігає температуру тіла, пульс, рівень активності та інші важливі фізіологічні показники. На основі цих даних сервер обчислює, чи перевищено критичні порогові значення, і автоматично формує рекомендації для власників тварин та ветеринарів. Крім того, система генерує сповіщення у випадку небезпечних змін стану здоров’я тварини, що дозволяє оперативно реагувати на загрози.
Алгоритми бізнес-логіки включають перевірку коректності даних, сортування за датою надходження, порівняння із встановленими порогами та створення записів у колекції Recommendation. Рекомендації можуть включати інформацію про необхідність звернення до ветеринара, контроль пульсу або активності тварини. Весь процес обробки даних автоматизований, що забезпечує мінімальну участь користувача у рутинних операціях.
1 const HealthData = require('../models/healthData');
2 const Recommendation = require('../models/recommendation');
3
4 async function analyzeHealth(animalId) {
5   const data = await HealthData.find({ animal_id: animalId }).sort({ recorded_at: -1 }).limit(1);
6   if (!data.length) return null;
7
8   const latest = data[0];
9   let recommendations = [];
10  if (latest.temperature > 39) recommendations.push('Висока температура, зверніться до ветеринара');
11  if (latest.pulse > 120) recommendations.push('Підвищений пульс, стежте за станом тварини');
12
13  const recs = await Recommendation.create({ animal_id: animalId, recommendation_text: recommendations.join('; ') });
14  return recs;
15 }
16
17 module.exports = { analyzeHealth };
3.2 Функції адміністрування серверної частини
Для підтримки безпечної та ефективної роботи системи були реалізовані функції адміністрування, які дозволяють створювати, редагувати та видаляти користувачів і тварин, а також керувати адміністраторами системи. Адміністратори мають повний доступ до всіх даних, можуть перевіряти правильність внесених даних та забезпечувати коректну роботу алгоритмів обробки показників здоров’я.
Функції адміністрування включають авторизацію адміністратора, управління сесіями, контроль доступу до критичних операцій, а також формування звітів і аналітичних даних для подальшого аналізу. Це дозволяє системі залишатися безпечною, надійною та зручною у використанні.
1 const User = require('../models/user');
2 const Animal = require('../models/animal');
3
4 async function createUser(data) {
5   const user = new User(data);
6   await user.save();
7   return user;
8 }
9
10 async function deleteUser(userId) {
11   await User.findByIdAndDelete(userId);
12   await Animal.deleteMany({ user_id: userId });
13 }
14
15 async function createAdmin(data) {
16   const admin = new User({ ...data, role: 'admin' });
17   await admin.save();
18   return admin;
19 }
20
21 module.exports = { createUser, deleteUser, createAdmin };
Реалізація серверної частини забезпечує інтеграцію з базою даних MongoDB через Mongoose, що дозволяє ефективно зберігати інформацію про користувачів, тварин, їхні фізіологічні показники, рекомендації та сповіщення. Кожен модуль логіки та адміністрування має чіткий інтерфейс для взаємодії з клієнтською частиною системи, що дозволяє підвищити надійність і масштабованість системи.
Така структура коду та розподіл функцій забезпечує легке розширення та модифікацію бізнес-логіки у майбутньому, інтеграцію додаткових IoT-пристроїв та підключення нових функцій аналітики.

4 UML-діаграми

Розроблено UML-діаграми діяльності та взаємодії серверної частини, які показують процес прийому даних про здоров’я тварин, обробку бізнес-логіки та функції адміністрування. Діаграми демонструють порядок обробки даних, отриманих від IoT-пристроїв та користувачів, логіку формування рекомендацій і сповіщень у разі критичних показників здоров’я, процес додавання та редагування інформації про тварин у базі даних, а також взаємодію користувача та серверної частини при отриманні сповіщень і даних про стан тварин. Для наочності всі діаграми розміщені у ДОДАТКУ Б. Кожна діаграма супроводжується поясненням, яке описує, як система обробляє конкретні дії та забезпечує роботу бізнес-логіки та функцій адміністрування.

5	ВИСНОВКИ

Під час виконання лабораторної роботи було успішно розроблено бізнес-логіку серверної частини системи VetMonitor та функції адміністрування користувачів і тварин. Було реалізовано алгоритми обробки даних про стан здоров’я тварин, що надходять від IoT-пристроїв, включно з перевіркою порогових значень, формуванням рекомендацій для власників та ветеринарів і автоматичною генерацією сповіщень у разі критичних показників. Це забезпечує своєчасне інформування користувачів та оперативне реагування на зміни стану здоров’я тварин.
Функції адміністрування дозволяють адміністраторам системи керувати користувачами, тваринами та алгоритмами обробки даних. Реалізовано механізми створення, редагування та видалення користувачів і тварин, управління сесіями та авторизацією, що забезпечує безпеку та контроль доступу. Контролери і маршрути для інтеграції бізнес-логіки та адміністрування з MongoDB дозволяють централізовано зберігати та обробляти інформацію про користувачів, тварин та адміністраторів.
Таким чином, лабораторна робота дозволила закріпити практичні навички розробки серверної частини, застосування Node.js та MongoDB, а також проектування бізнес-логіки та адміністрування користувачів у сучасних IoT-системах для ветеринарного моніторингу.
 
ДОДАТОК А

UML діаграма отримання всіх користувачів

 
Рисунок А.1 – UML отримання всіх користувачів

Діаграма описує процес отримання списку користувачів, починаючи від клієнта та закінчуючи поверненням результату з бази даних. 
ДОДАТОК Б

UML діаграми активності та взаємодії

 
Рисунок Б.1 – UML діаграма діяльності: Обробка даних про тварину

Діаграма на рис. Б.1 показує загальний процес обробки даних про тварину: отримання даних із IoT-пристроїв, валідацію, перевірку порогових значень, формування рекомендацій і сповіщень для користувача.
 
Рисунок Б.2 – UML діаграма діяльності: Створення сповіщення

Діаграма на рис. Б.2 демонструє, як користувач додає нову тварину до системи, а сервер перевіряє дані та зберігає інформацію у базі.

 
Рисунок Б.3 – UML діаграма діяльності: Додавання даних здоров’я тварини

Діаграма на рис. Б.3 показує процес додавання даних здоров’я тварини: отримання від пристроїв, перевірка коректності, збереження та створення сповіщень у разі критичних показників.

 
Рисунок Б.4 – UML діаграма Sequence Diagram: Взаємодія користувача та сервера для отримання сповіщень

Діаграма на рис. Б.4 показує, як користувач запитує сповіщення, сервер отримує дані з бази і повертає їх у клієнтську частину.

Посилання на відео: https://youtu.be/okB4Kc-AmJk

